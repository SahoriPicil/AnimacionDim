<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Pincel con Dibujo y Objeto Movil</title>
<style>
    body {
        background-image: url('fondo.png');
    background-size: cover; /* Hace que la imagen cubra toda la pantalla sin repetirse */
    background-repeat: no-repeat; /* Evita que la imagen se repita */
    background-position: center; /* Opcional: centra la imagen en la pantalla */
    text-align: center;
    width: 100%;
    background-color: rgb(0, 0, 0);
    font-family: Impact, sans-serif;
    }
    canvas {
        background-color: rgba(0, 0, 0, 0);
        border: 6px solid rgb(255, 255, 255);
        display: block;
        margin: 10px auto;
        border-radius: 50px;
        cursor: none; /* Ocultar cursor para que solo se vea la imagen del pincel */
    }
    .container {
        margin: 0px auto;
        text-align: center;
        width: 1020px;
    }
    .colores {
        margin-bottom: 10px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        
    }
    .color-btn {
        width: 50px;
        height: 50px;
        margin: 3px;
        border: 0px solid transparent;
        cursor: pointer;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        transition: border 0.2s;
    }
    
    /* Aquí cambias las rutas a tus imágenes PNG correspondientes */
    #color1 { background-image: url('rojo.png'); 
      border-radius: 50px;
    }
    #color2 { background-image: url('verde.png'); border-radius: 50px;}
    #color3 { background-image: url('azul.png');border-radius: 50px;}
    #color4 { background-image: url('amarillo.png');border-radius: 50px;}
    #color5 { background-image: url('rosa.png');border-radius: 50px;}
/* Resalta el botón activo */
    .color-btn.active {
        border: 3px solid rgb(255, 255, 255);
    }
    #borrar {
        width: 280px;
        background-color: rgba(67, 34, 255, 0.219);
        font: 24px Impact;
        color: rgb(95, 80, 168);
        margin-top: 3px;
        height: 50px;
        border: 2px solid rgb(255, 255, 255);
        border-radius: 50px;
    }

    #grosorLabel {
        margin-top: 10px;
        color: rgb(145, 230, 98);
        margin-left:-10px;
        font-size: 24px;
        margin-right: 10px;
    }
    #grosorSlider {
    /* Cambiar el color de la pista */
    -webkit-appearance: none; /* Para Chrome/Safari */
    width: 150px;
    height: 8px; /* Grosor de la pista */
    background: #d0ff00; /* Color de fondo de la pista */
    border-radius: 5px;
    outline: none;
    margin-top: 20px;
}

/* Estilo para la parte activa del slider en Chrome/Safari */
#grosorSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #ffffff; /* Color del pulgar */
    cursor: pointer;
    border-radius: 50%;
    border: 3px rgb(255, 255, 255);
    box-shadow: 0 0 2px rgba(0,0,0,0.5);
}

/* Estilo para el pulgar en Firefox */
#grosorSlider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #444;
    cursor: pointer;
    border-radius: 50%;
    border: none;
}
</style>
</head>
<body>
<div class="container">
    <!-- Paleta de colores con imágenes PNG -->
      
    <div class="colores">
        <label id="grosorLabel" for="grosorSlider">Grosor:</label>
        <input type="range" id="grosorSlider" min="1" max="30" value="5">
        <button id="color1" class="color-btn" data-color="#FF2800" title="Rojo"></button>
        <button id="color2" class="color-btn" data-color="#5EFF00" title="Verde"></button>
        <button id="color3" class="color-btn" data-color="#00FFFF" title="Azul"></button>
        <button id="color4" class="color-btn" data-color="#F4FF26" title="Amarillo"></button>
        <button id="color5" class="color-btn" data-color="#FF00D0" title="Fucsia"></button>
        <button id="borrar">Borrar Todo</button>
    </div>
    <!-- Botón para borrar -->
    
    <!-- Control de grosor -->
   
    <!-- Canvas -->
    <canvas id="canvas" width="900" height="500"></canvas>
    <aside>Click y arrastra para dibujar. La imagen del pincel sigue el mouse y también puedes dibujar con el color y grosor seleccionados.</aside>
</div>

<script>
// Función para capturar las coordenadas del mouse
const utils = {
    captureMouse: function (element) {
        const mouse = { x: 0, y: 0 };
        element.addEventListener('mousemove', function (event) {
            const rect = element.getBoundingClientRect();
            mouse.x = event.clientX - rect.left;
            mouse.y = event.clientY - rect.top;
        });
        return mouse;
    }
};

window.onload = function() {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const mouse = utils.captureMouse(canvas);

    let currentColor = "#ff0000";
    let lineWidth = 5;

    let isDrawing = false;

    const colorButtons = document.querySelectorAll('.color-btn');

    // Función para activar visualmente el botón presionado
    function activateButton(btn) {
        colorButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    // Configurar botones
    // Iniciar con el primer botón activo
    const firstButton = document.querySelector('#color1');
    activateButton(firstButton);
    currentColor = firstButton.dataset.color;

    document.querySelector('.colores').addEventListener('click', function(e) {
        if (e.target.tagName === 'BUTTON' && e.target.dataset.color) {
            currentColor = e.target.dataset.color;
            activateButton(e.target);
        }
    });

    document.getElementById('borrar').addEventListener('click', function() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    });

    const grosorSlider = document.getElementById('grosorSlider');
    grosorSlider.addEventListener('input', function() {
        lineWidth = parseInt(this.value);
    });

    // Dibujo en línea
    canvas.addEventListener('mousedown', function() {
        isDrawing = true;
        ctx.beginPath();
        ctx.moveTo(mouse.x, mouse.y);
    });
    canvas.addEventListener('mouseup', function() {
        isDrawing = false;
    });
    canvas.addEventListener('mousemove', function() {
        if (isDrawing) {
            ctx.lineTo(mouse.x, mouse.y);
            ctx.strokeStyle = currentColor;
            ctx.lineWidth = lineWidth;
            ctx.stroke();
        }
    });

    // ciclo de animación sin dibujar la imagen del pincel
    function draw() {
        requestAnimationFrame(draw);
    }
    draw();
};
</script>
</body>
</html>